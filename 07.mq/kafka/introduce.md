## 介绍

## 组成部分
* 生产者
* 消费者
* broker
  * 领导者
  * 追随者
* Replica
  * 
* 分区
  * 每个主题划分成多个分区，每个分区是一组有序的消息日志
  * 生产者生产的每条消息只会被送到一个分区
## broker
* 将不同的broker分散运行到不同的机器上

## 持久化
* kafka使用消息日志来保存数据，一个日志就是磁盘上一个只能追加写消息的物理文件
* 因为只能追加写入，故避免了缓慢的随机io操作，改成性能较好的顺序io写操作，这是kafka高吞吐量特性的一个重要手段
* 那么带来一个问题，如果一直向磁盘写入日志，最终也会耗尽所有的磁盘空间，那么kafka必然要定期地删除消息以回收日志段
  * 简单来说就是通过日志段机制，在kafka底层，一个日志又进一步细分多个日志段，消息被追写到当前的最新的日志段中，
  * 当写满一个日志段后，kafka会自动切分出一个新的日志段，并将老的日志段封存起来。
  * kafka在后台还有定时任务会定期地检查老的日志段是否能够被删除，从而实现回收磁盘空间的目的。

## 消费组
* 将多个消费者实例共同组成一组来消费一组主题，同时消费多个分区以实现高吞吐