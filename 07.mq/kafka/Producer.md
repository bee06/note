## 消费者分区

* Kafka 的消息组织方式实际上是三级结构：主题 - 分区 - 消息。
* 主题下的每条消息只会保存在某一个分区中，而不会在多个分区中被保存多份
![messages-with-without-keys](messages-with-without-keys.png)
### 为什么分区要这么设计呢
* 其实分区的作用就是提供负载均衡的能力，主要目的是为了提高kafka的高伸缩性

### 分区策略
所谓的分区策略其实就是生产者将消息发送到哪个分区的算法，kafka提供了默认的分区策略，也支持自定的分区策略

  * 轮询分区策略
    * 轮询策略有非常优秀的负载均衡表现，它总是能保证消息最大限度地被平均分配到所有分区上，故默认情况下它是最合理的分区策略，也是我们最常用的分区策略之一。
  * 随机策略
    * 随机就是我们随意地将消息放置到任意一个分区上
  * 按消息键保序策略
    * 一旦消息被定义了 Key，那么你就可以保证同一个 Key 的所有消息都进入到相同的分区里面，由于每个分区下的消息处理都是有顺序的，故这个策略被称为按消息键保序策略
