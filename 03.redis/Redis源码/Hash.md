## 问题
* 说说Redis的Hash底层设计

## 难点
1. hash算法的冲突
2. rehash的设计

## 说明
* redis的hash为了避免大量的hash表数据迁移，会造成cpu的阻塞，无法服务其他请求,采用了渐进式rehash
* 执行过程:
  * 哈希表1的第一个索引位置开始，顺带着将这个索引上的entries拷贝到哈希表2中
  * 好处
    * 巧妙的把一次性大量拷贝，分摊到多个请求处理过程中，避免耗时的操作，保证了数据的快速访问

## redis的rehash是怎么操作过程
增量hash，dict的数据结构里包含两个哈希表。在重哈希期间，数据从第一个哈希表向第二个哈希表迁移

它采用了一种称为增量式重哈希（incremental rehashing）的方法，在需要扩展内存时避免一次性对所有key进行重哈希，而是将重哈希操作分散到对于dict的各个增删改查的操作中去。这种方法能做到每次只对一小部分key进行重哈希，而每次重哈希之间不影响dict的操作。dict之所以这样设计，是为了避免重哈希期间单个请求的响应时间剧烈增加，这与前面提到的“快速响应时间”的设计原则是相符的。