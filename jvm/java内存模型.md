
线程之间如何通信？进程的通信的方式

线程是共享内存和消息传递

同步是指程序中用于不同线程间操作发生相对顺序的机制





原子操作实现的原理
总线锁保证原子性
 就是使用处理器提供一个Lock#信号，当一个处理器在总线上输出信号时，其他处理器的请求将被阻塞，那么该处理器可以独占共享内存

使用缓存锁保证原子性，
	统一时刻，我们只需保证对某个内存地址的操作是原子性的，但是总线锁定把cpu和内存之间的通信锁住了，这使得锁定期间，其他处理器
	不能操作其他内存的地址，所以总线锁定开销比较大，目前处理器在某些场合下使用缓存锁定代替总线锁定来进行优化

	所谓的缓存锁定，是指内存区域如果被缓存在处理器缓存行中，并且在lock操作期间被锁定，那么当它执行锁操作回写内存时候，
	处理器不在总线上声言lock信号，而是修改内部的内存地址，并循序他的缓存一致性机制保证操作的原子性
	因为缓存一致性机制，会阻止同时修改由两个以上的处理器缓存的内存区域，档其他处理器回写已被锁定的缓存行的数据时
	会使缓存行无效


有两种情况下，不能使用缓存行
1、当操作的数据不能被缓存在处理器内部，或者操作的数据跨多个缓存行，则处理器会调用总线锁定
2、有些处理器不支持缓存锁定


java 如何实现原子操作
1、使用循环cas实现原子性
2、cas带来的问题
	aba问题
	循环时间长开销大
	只保证一个共享变了的原子操作



