### java的堆外内存
堆外内存的限额默认与堆内内存(由-XMX 设定)相同，可用 -XX:MaxDirectMemorySize 重新设定

#### 优缺点
优点：
* 可以扩展至更大的内存空间。比如超过1TB甚至比主存还大的空间;
* 理论上能减少GC暂停时间;
* 可以在进程间（系统调用，aio）共享，减少JVM间的对象复制，使得JVM的分割部署更容易实现;
* 它的持久化存储可以支持快速重启，同时还能够在测试环境中重现生产数据
* 堆外内存能减少IO时的内存复制，不需要堆内存Buffer拷贝一份到直接内存，然后才写入Socket中

#### 缺点：
* 需要手动释放（或者在引用直接内存的对象回收的时候释放，相当于依赖gc）
* 当依靠gc时，需要考虑gc时机如何确定，频繁显示调用System.gc()显然不是个好主意，因为不可控，而依靠堆内存控制，需要计算堆外内存的增长速率与堆内内* 存增长速率的关系，合理配置jvm参数，在堆外内存OOM之前触发gc
* Unsafe对象通常是不可见的，因为其实现并非开源，并且不同jre发行商都对此有不同实现和政策

